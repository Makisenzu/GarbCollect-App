import{r as t}from"./app-CJ4SoJUS.js";import{a as m}from"./mapbox-gl-201PZ-Mp.js";const M=({mapboxKey:i,isMobile:c})=>{const a=t.useRef(null),r=t.useRef(null),[u,p]=t.useState(!1),[f,n]=t.useState(!1),[S,o]=t.useState(null),[g,s]=t.useState(!1);return t.useEffect(()=>{(()=>{const e=document.createElement("link");return e.href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css",e.rel="stylesheet",e.onload=()=>{p(!0)},e.onerror=()=>{console.error("Failed to load Mapbox CSS"),o("Failed to load map styles")},document.head.appendChild(e),()=>{document.head.contains(e)&&document.head.removeChild(e)}})()},[]),{mapContainer:a,map:r,cssLoaded:u,mapInitialized:f,mapError:S,customStyleLoaded:g,setMapInitialized:n,setCustomStyleLoaded:s,setMapError:o,initializeMap:l=>{if(!(!u||!i||r.current||!a.current)){try{m.accessToken=i,r.current=new m.Map({container:a.current,style:"mapbox://styles/makisenpai/cm9mo7odu006c01qsc3931nj7",center:[125.94849837776422,8.483022468128098],zoom:c?11:10.5,attributionControl:!1,interactive:!0,scrollZoom:!0,dragPan:!0,dragRotate:!1,keyboard:!1,doubleClickZoom:!c,touchZoomRotate:!0,touchPitch:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!0}),r.current.on("load",()=>{n(!0),s(!0),console.log("Map loaded and initialized"),l&&l()}),r.current.on("error",e=>{var d;console.error("Map error:",e),o("Failed to load map: "+((d=e.error)==null?void 0:d.message)),console.warn("Map loading failed but continuing in limited mode")}),r.current.on("idle",()=>{})}catch(e){console.error("Error creating map:",e),o("Failed to initialize map: "+e.message)}return()=>{r.current&&(r.current.remove(),r.current=null,n(!1),s(!1))}}}}};export{M as useMapboxSetup};
