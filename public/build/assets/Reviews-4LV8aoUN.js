import{J as N,r as b,j as e,S as v}from"./app-BvmHgrQj.js";import{P as w}from"./Pagination-CIe555Up.js";import{S as c}from"./sweetalert2.esm.all-DGhwgajj.js";import{M as o,U as k}from"./user-BX-3epBI.js";import{c as C}from"./createLucideIcon-DeA6GfAg.js";import{S as M}from"./star-BYqgL7ZU.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],D=C("trash-2",B);function E(){const{reviews:r,average_rating:x,flash:a}=N().props,[p,u]=b.useState(null),l=r.data||r,h=r.links||null;b.useEffect(()=>{a!=null&&a.success&&c.fire({icon:"success",title:"Deleted!",text:a.success,confirmButtonColor:"#10b981",timer:2e3,customClass:{popup:"rounded-2xl",confirmButton:"px-6 py-3 rounded-xl"}}),a!=null&&a.error&&c.fire({icon:"error",title:"Error!",text:a.error,confirmButtonColor:"#ef4444",customClass:{popup:"rounded-2xl",confirmButton:"px-6 py-3 rounded-xl"}})},[a]);const f=t=>{const s=new Date(t),d=Math.abs(new Date-s),n=Math.floor(d/(1e3*60*60*24)),m=Math.floor(d/(1e3*60*60)),i=Math.floor(d/(1e3*60));return i<60?`${i} minute${i!==1?"s":""} ago`:m<24?`${m} hour${m!==1?"s":""} ago`:n<7?`${n} day${n!==1?"s":""} ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g=t=>[1,2,3,4,5].map(s=>e.jsx(M,{className:`h-4 w-4 ${s<=t?"text-amber-400 fill-amber-400":"text-gray-300"}`},s)),y=async(t,s)=>{(await c.fire({title:"Delete Review?",html:`
                <p class="text-gray-700 mb-2">Are you sure you want to delete this review?</p>
                <p class="text-sm text-gray-600">Reviewer: <strong>${s}</strong></p>
                <p class="text-sm text-red-600 mt-3">This action cannot be undone!</p>
            `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel",customClass:{popup:"rounded-2xl",confirmButton:"px-6 py-3 rounded-xl",cancelButton:"px-6 py-3 rounded-xl"}})).isConfirmed&&(u(t),v.delete(`/admin/reviews/${t}`,{preserveScroll:!0,onFinish:()=>{u(null)}}))};return!l||l.length===0?e.jsxs("div",{className:"mt-6 md:mt-12 space-y-4 md:space-y-6 px-2 md:px-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(o,{className:"h-5 w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Reviews & Feedback"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-0.5",children:"Community feedback and ratings"})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 md:py-16 bg-gradient-to-br from-gray-50 to-white rounded-xl border border-gray-200",children:[e.jsx("div",{className:"p-3 md:p-4 bg-gray-100 rounded-full mb-3 md:mb-4",children:e.jsx(o,{className:"h-6 w-6 md:h-8 md:w-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-900 text-base md:text-lg font-semibold",children:"No reviews yet"}),e.jsx("p",{className:"text-gray-500 text-xs md:text-sm mt-2",children:"Be the first to share your feedback"})]})]}):e.jsxs("div",{className:"mt-6 md:mt-12 space-y-4 md:space-y-6 px-2 md:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(o,{className:"h-5 w-5 md:h-6 md:w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Reviews & Feedback"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-0.5",children:"Community feedback and ratings"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-gradient-to-br from-amber-50 to-orange-50 px-4 md:px-6 py-2 md:py-3 rounded-xl border border-amber-200",children:[e.jsx("div",{className:"flex items-center gap-1",children:g(Math.round(x))}),e.jsxs("div",{className:"border-l border-amber-300 pl-3",children:[e.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-900",children:x.toFixed(1)}),e.jsx("span",{className:"text-xs md:text-sm text-gray-600 ml-1",children:"/ 5"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:l.map(t=>{var s;return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 hover:border-purple-200 hover:shadow-lg transition-all duration-200 overflow-hidden",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 md:mb-4",children:[e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br from-blue-100 to-blue-50 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(k,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm md:text-base text-gray-900 truncate",children:t.fullname}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 truncate",children:((s=t.category)==null?void 0:s.category_name)||"Resident"}),e.jsx("p",{className:"text-xs md:text-sm text-blue-600 truncate",children:t.barangay})]})]}),e.jsxs("div",{className:"flex flex-col items-end flex-shrink-0 ml-2 md:ml-3",children:[e.jsx("div",{className:"flex items-center gap-0.5 md:gap-1 mb-1",children:g(t.rate)}),e.jsx("span",{className:"text-xs md:text-sm font-semibold text-gray-900",children:t.rate.toFixed(1)})]})]}),e.jsx("div",{className:"mb-3 md:mb-4",children:e.jsx("p",{className:"text-gray-700 text-xs md:text-sm leading-relaxed line-clamp-3",children:t.review_content})}),t.additional_comments&&e.jsxs("div",{className:"mb-3 md:mb-4 p-2 md:p-3 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Additional Comments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 line-clamp-2",children:t.additional_comments})]}),t.replies&&e.jsxs("div",{className:"mb-3 md:mb-4 p-2 md:p-3 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"Official Response"}),e.jsx("p",{className:"text-xs md:text-sm text-blue-800 line-clamp-2",children:t.replies.reply_content}),e.jsx("p",{className:"text-xs text-blue-600 mt-2",children:f(t.replies.created_at)})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 pt-3 md:pt-4 border-t border-gray-100",children:[e.jsx("span",{className:"text-xs text-gray-500",children:f(t.created_at)}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsxs("button",{onClick:()=>y(t.id,t.fullname),disabled:p===t.id,className:"flex items-center gap-1 md:gap-1.5 text-red-600 hover:text-red-800 hover:bg-red-50 px-2 md:px-3 py-1 md:py-1.5 rounded-lg text-xs md:text-sm font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(D,{className:"h-3 w-3 md:h-4 md:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:p===t.id?"Deleting...":"Delete"})]})})]})]})},t.id)})}),h&&e.jsx(w,{links:h})]})}export{E as default};
