import{r as l,j as e,S as k,a as G}from"./app-BMd61d6g.js";import{F as V}from"./FormModal-Bybm1zHB.js";import{C as he}from"./ClientPagination-DrDT2WBr.js";import{c as te,s as h}from"./SweetAlert-DgV50CyZ.js";import{g as re}from"./imageHelpers-BzNwYwgf.js";import"./TextInput-u9dg2aES.js";import"./PrimaryButton-2j6uOLZF.js";import"./index-DM-qrlhY.js";import"./iconBase-CxoyT6YB.js";var ge={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function se(t){if(typeof t=="number")return{value:t,unit:"px"};var a,i=(t.match(/^[0-9.]*/)||"").toString();i.includes(".")?a=parseFloat(i):a=parseInt(i,10);var o=(t.match(/[^0-9]*$/)||"").toString();return ge[o]?{value:a,unit:o}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}function ee(t){var a=se(t);return"".concat(a.value).concat(a.unit)}var ae=function(t,a,i){var o="react-spinners-".concat(t,"-").concat(i);if(typeof window>"u"||!window.document)return o;var c=document.createElement("style");document.head.appendChild(c);var p=c.sheet,E=`
    @keyframes `.concat(o,` {
      `).concat(a,`
    }
  `);return p&&p.insertRule(E,0),o},W=function(){return W=Object.assign||function(t){for(var a,i=1,o=arguments.length;i<o;i++){a=arguments[i];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c])}return t},W.apply(this,arguments)},xe=function(t,a){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&a.indexOf(o)<0&&(i[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(t);c<o.length;c++)a.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(t,o[c])&&(i[o[c]]=t[o[c]]);return i},pe=ae("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),fe=ae("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");function ye(t){var a=t.loading,i=a===void 0?!0:a,o=t.color,c=o===void 0?"#000000":o,p=t.speedMultiplier,E=p===void 0?1:p,w=t.cssOverride,F=w===void 0?{}:w,T=t.size,N=T===void 0?60:T,O=xe(t,["loading","color","speedMultiplier","cssOverride","size"]),S=se(N),y=S.value,v=S.unit,P=W({display:"inherit",width:ee(N),height:ee(N),position:"relative"},F),j=function($){return{position:"absolute",top:"0",left:"0",width:"".concat(y).concat(v),height:"".concat(y).concat(v),border:"".concat(y/10).concat(v," solid ").concat(c),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat($===1?pe:fe," ").concat(2/E,"s 0s infinite linear")}};return i?l.createElement("span",W({style:P},O),l.createElement("span",{style:j(1)}),l.createElement("span",{style:j(2)})):null}const be=({driver:t,schedules:a,show:i,onClose:o,isLoadingSchedules:c=!1})=>{var J,K,Q;if(!i||!t)return null;l.useEffect(()=>{},[i,a]);const[p,E]=l.useState(1),[w,F]=l.useState(!0),[T,N]=l.useState(!1),[O,S]=l.useState(!1),[y,v]=l.useState(null),[P,j]=l.useState({}),[$,C]=l.useState({}),[I,U]=l.useState(!1),[z,R]=l.useState(!1),A=5;l.useEffect(()=>{if(i){F(!0);const r=setTimeout(()=>{F(!1)},500);return()=>clearTimeout(r)}},[i,a]);const{sortedAndGroupedSchedules:B,monthlySchedules:H}=l.useMemo(()=>{try{const s=[...a.filter(u=>u&&u.driver_id===t.id)].sort((u,x)=>{try{const n=new Date(u.collection_date),_=new Date(x.collection_date);if(n.getTime()!==_.getTime())return n.getTime()-_.getTime();const ue=u.collection_time||"00:00",me=x.collection_time||"00:00";return ue.localeCompare(me)}catch(n){return console.error("Error sorting schedules:",n),0}}),g=s.reduce((u,x)=>{try{const _=new Date(x.collection_date).toLocaleDateString("en-US",{year:"numeric",month:"long"});u[_]||(u[_]=[]),u[_].push(x)}catch(n){console.error("Error grouping schedule:",n,x)}return u},{}),f=Object.entries(g).map(([u,x])=>({monthYear:u,schedules:x}));return f.sort((u,x)=>{try{const n=new Date(u.monthYear),_=new Date(x.monthYear);return n.getTime()-_.getTime()}catch(n){return console.error("Error sorting months:",n),0}}),{sortedAndGroupedSchedules:s,monthlySchedules:f}}catch(r){return console.error("Error processing schedules:",r),{sortedAndGroupedSchedules:[],monthlySchedules:[]}}},[a,t.id]),q=l.useMemo(()=>{const r=[];return H.forEach(({monthYear:s,schedules:g})=>{r.push({type:"month-header",monthYear:s}),g.forEach(f=>{r.push({type:"schedule",schedule:f})})}),r},[H]),X=Math.ceil(q.length/A),M=(p-1)*A,Z=l.useMemo(()=>q.slice(M,M+A),[q,M,A]),m=[{name:"collection_date",label:"Collection Date",type:"date",required:!0},{name:"collection_time",label:"Collection Time",type:"time",required:!0},{name:"notes",label:"Notes",type:"textarea",required:!1,rows:3}],d=[{name:"status",label:"Driver Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"pending",label:"Pending"},{value:"onduty",label:"On Duty"},{value:"resigned",label:"Resigned"}]},{name:"license_number",label:"License Number",type:"text",required:!0,placeholder:"Enter license number"}],D=(r,s)=>{const g=r?r.charAt(0).toUpperCase():"",f=s?s.charAt(0).toUpperCase():"";return`${g}${f}`},L=r=>{if(!r)return"N/A";try{const s=new Date(r);return isNaN(s.getTime())?"Invalid Date":s.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(s){return console.error("Error formatting date:",s),"Invalid Date"}},Y=r=>{if(!r)return"N/A";try{const[s,g]=r.split(":").map(Number),f=s>=12?"PM":"AM";return`${s%12||12}:${g.toString().padStart(2,"0")}${f}`}catch(s){return console.error("Error formatting time:",s),r}},b=r=>{var s;if(!r)return console.warn("Schedule is undefined or null"),"N/A";try{return(s=r.barangay)!=null&&s.baranggay_name?r.barangay.baranggay_name:r.baranggay_name?r.baranggay_name:r.barangay_name?r.barangay_name:(console.warn("Could not find barangay name for schedule:",{id:r.id,barangay:r.barangay,baranggay_name:r.baranggay_name,barangay_name:r.barangay_name}),"Unknown Barangay")}catch(g){return console.error("Error getting barangay name:",g,r),"Error Loading"}},ne=r=>{E(r)},oe=r=>{v(r);const s={collection_date:r.collection_date?new Date(r.collection_date).toISOString().split("T")[0]:"",collection_time:r.collection_time||"",notes:r.notes||""};j(s),N(!0)},le=async r=>{U(!0);try{await k.patch(`/admin/driver/schedule/${y.id}`,r,{preserveScroll:!0,onSuccess:()=>{h("success","Schedule updated successfully"),N(!1),v(null),j({}),k.reload()},onError:s=>{h("error","Failed to update schedule")},onFinish:()=>{U(!1)}})}catch(s){console.error("Edit submission error:",s),U(!1)}},ie=()=>{const r={status:t.status||"",license_number:t.license_number||""};C(r),S(!0)},ce=async r=>{R(!0);try{await k.patch(`/admin/drivers/${t.id}`,r,{preserveScroll:!0,onSuccess:()=>{h("success","Driver updated successfully"),S(!1),C({}),k.reload()},onError:s=>{h("error","Failed to update driver")},onFinish:()=>{R(!1)}})}catch(s){console.error("Driver edit submission error:",s),R(!1)}},de=async r=>{var g;await te("Delete Schedule",`Are you sure you want to delete this schedule for ${((g=r.barangay)==null?void 0:g.baranggay_name)||r.baranggay_name||"this barangay"}?`,"Delete")&&k.delete(`/admin/driver/schedule/${r.id}`,{preserveScroll:!0,onSuccess:()=>{h("success","Schedule deleted successfully"),k.reload()},onError:()=>{h("error","Failed to delete schedule")}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Driver Details"}),e.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:t.user.picture?e.jsx("img",{src:re(t.user),alt:`${t.user.name} ${t.user.lastname}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-20 h-20 text-gray-400 flex items-center justify-center text-2xl font-bold",children:D(t.user.name,t.user.lastname)})})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(J=t.user)==null?void 0:J.name," ",(K=t.user)==null?void 0:K.lastname,e.jsxs("div",{className:"relative group flex-shrink-0",children:[e.jsx("span",{className:`w-2 h-2 rounded-full block
                          ${t.status==="onduty"?"bg-green-500":t.status==="inactive"?"bg-red-500":t.status==="pending"?"bg-yellow-500":t.status==="active"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[t.status.charAt(0).toUpperCase()+t.status.slice(1),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),e.jsx("p",{className:"text-gray-600",children:(Q=t.user)==null?void 0:Q.email})]}),e.jsxs("button",{onClick:ie,className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Driver",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Driver"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"License Number"}),e.jsx("p",{className:"font-medium",children:t.license_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:t.user.phone_num||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Employment Date"}),e.jsx("p",{className:"font-medium",children:L(t.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:t.status})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Scheduled Collection"}),!w&&B.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",M+1,"-",Math.min(M+A,B.length)," of ",B.length," schedules"]})]}),w||c?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ye,{color:"#00de08",size:50,loading:!0}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading schedules..."})]}):B.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barangay"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map((r,s)=>{var g,f,u,x;try{if(r.type==="month-header")return e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-3",children:e.jsx("h5",{className:"font-semibold text-gray-900 text-sm",children:r.monthYear})})},`month-${r.monthYear}`);if(r.type==="schedule"&&r.schedule){const n=r.schedule;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L(n.collection_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b(n)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Y(n.collection_time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n.finished_time?Y(n.finished_time):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                      ${n.status==="completed"?"bg-green-100 text-green-800":n.status==="failed"?"bg-red-100 text-red-800":n.status==="progress"?"bg-yellow-100 text-yellow-800":n.status==="active"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:((f=(g=n.status)==null?void 0:g.charAt(0))==null?void 0:f.toUpperCase())+((x=(u=n.status)==null?void 0:u.slice(1))==null?void 0:x.replace("_"," "))||"N/A"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:n.notes||"None"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>oe(n),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Schedule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>de(n),className:"text-red-600 hover:text-red-900 transition-colors",title:"Remove Schedule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},n.id||`schedule-${s}`)}else return console.warn("Invalid item type or missing schedule data:",r),null}catch(n){return console.error("Error rendering schedule item:",n,r),e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-sm text-red-600",children:"Error displaying schedule"})},`error-${s}`)}})})]})}),e.jsx(he,{currentPage:p,totalPages:X,onPageChange:ne})]}):e.jsx("p",{className:"text-gray-500",children:"No barangay schedules found for this driver."})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t",children:e.jsx("button",{type:"button",onClick:o,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors",children:"Close"})})]})}),e.jsx(V,{show:T,onClose:()=>{N(!1),v(null),j({})},title:"Edit Schedule",initialData:y,onSubmit:le,fields:m,submitText:I?"Updating...":"Update Schedule",processing:I,formData:P,onFormChange:j}),e.jsx(V,{show:O,onClose:()=>{S(!1),C({})},title:"Edit Driver",initialData:t,onSubmit:ce,fields:d,submitText:z?"Updating...":"Update Driver",processing:z,formData:$,onFormChange:C})]})},Ce=({driver:t,schedule:a,isActive:i})=>{const[o,c]=l.useState(!1),p=l.useRef(null),[E,w]=l.useState(!1),[F,T]=l.useState([]),[N,O]=l.useState(!1),[S,y]=l.useState(!1),[v,P]=l.useState({}),[j,$]=l.useState(!1);l.useEffect(()=>{(async()=>{O(!0);try{const d=await G.get("/admin/getBarangay/1");T(d.data.barangay_data||[])}catch(d){console.error("Error fetching barangays: ",d)}finally{O(!1)}})()},[]);const C=new Date,I=C.toISOString().split("T")[0],U=C.toTimeString().slice(0,5),z=[{name:"driver_id",type:"hidden",value:t.id,disabled:!0},{name:"barangay_id",label:"Barangay",type:"select",required:!0,options:F.map(m=>({value:m.id,label:m.baranggay_name})),placeholder:"Select a barangay"},{name:"collection_date",label:"Date",type:"date",value:I,min:I,required:!0},{name:"collection_time",label:"Time",type:"time",value:U,required:!0},{name:"status",label:"Status",type:"select",required:!0,value:"active",options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{name:"notes",label:"Additional note",type:"text",required:!1}],R=async m=>{$(!0);try{await G.post("/admin/driver/assign",m),h("success","Driver assigned"),k.reload({only:["drivers","schedules"]}),y(!1)}catch(d){if(console.error("Failed to assign barangay:",d),d.response)if(d.response.data.errors){const D=Object.values(d.response.data.errors)[0][0];h("error",D)}else d.response.data.message?h("error",d.response.data.message):h("error","Something went wrong");else h("error",d.message||"Network error")}finally{$(!1)}},A=async m=>{var D,L,Y;if(await te("Are you sure?","This action will permanently remove the driver. This cannot be undone."))try{const b=await G.delete(`/delete/driver/${m}`);b.data.success?(h("success",b.data.message),k.reload({only:["drivers","stats","users"]})):h("error",b.data.message)}catch(b){((D=b.response)==null?void 0:D.status)===422?h("error",b.response.data.message):(Y=(L=b.response)==null?void 0:L.data)!=null&&Y.message?h("error",b.response.data.message):h("error","Failed to remove driver")}};l.useEffect(()=>{function m(d){p.current&&!p.current.contains(d.target)&&c(!1)}return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const B=()=>{if(!i)return"bg-gray-400";switch(t.status){case"on duty":case"onduty":return"bg-green-500";case"active":return"bg-blue-500";case"inactive":return"bg-red-500";case"pending":return"bg-yellow-500";case"resigned":return"bg-gray-500";default:return"bg-gray-500"}},q=(()=>{if(!i)return"Off Duty";switch(t.status){case"on duty":case"onduty":return"On Duty";case"active":return"Active";case"inactive":return"Inactive";case"pending":return"Pending";case"resigned":return"Resigned";default:return t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Unknown"}})(),X=B(),M=(m,d)=>{const D=m?m.charAt(0).toUpperCase():"",L=d?d.charAt(0).toUpperCase():"";return`${D}${L}`},Z=a&&a.some(m=>m.driver_id===t.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.user.picture?e.jsx("img",{src:re(t.user),alt:t.user.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:M(t.user.name,t.user.lastname)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:[t.user.name," ",t.user.lastname]}),e.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${X}`,title:q})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:t.user.email})]})]}),e.jsxs("div",{className:"relative flex-shrink-0",ref:p,children:[e.jsx("button",{onClick:()=>c(!o),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),o&&e.jsxs("div",{className:"absolute right-0 mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-50 overflow-hidden",children:[e.jsx("button",{onClick:()=>w(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"View Details"}),e.jsx("button",{onClick:()=>A(t.id),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:"Remove"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>y(!0),className:"w-full px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-gray-900 rounded-md hover:bg-gray-800 transition-colors",children:Z?"Set another schedule":"Create Schedule"})})]}),e.jsx(V,{show:S,onClose:()=>y(!1),title:`Assign Schedule to ${t.user.name}`,fields:z,initialData:{driver_id:t.id},formData:v,onFormChange:P,onSubmit:R,submitText:"Assign",processing:j}),e.jsx(be,{driver:t,schedules:a,show:E,onClose:()=>w(!1)})]})};export{Ce as default};
