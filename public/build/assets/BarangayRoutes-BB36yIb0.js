import{r as p,j as e,Q as f,t as v}from"./app-B7J0SWTz.js";import N from"./useBarangayMap-Cxwf6D0G.js";import"./mapbox-gl-BWmm1S5w.js";/* empty css                  */import"./react-select.esm-4ZNVv0Rz.js";import"./index-CnyDuYXe.js";import"./index-Djzd8WEg.js";import"./can-3MqaZyCZ.js";const R=({mapboxToken:i})=>{var l;const{mapContainer:n,loading:o,error:r,renderBarangaySelect:d,renderSitesInfo:y,selectedBarangay:c,activeSites:t,loadingSites:m,routeInfo:s,nearestSite:a}=N(i),[x,h]=p.useState({barangay_id:""}),u=(b,g)=>{h(j=>({...j,[b]:g}))};return r?e.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-gray-100 p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Map Error"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:r}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition-colors duration-200",children:"Reload Page"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"San Francisco Map"}),e.jsxs("div",{className:"w-full h-screen relative bg-gray-100",children:[o&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),e.jsx(v,{href:"/",className:"absolute top-4 left-4 z-40 bg-white hover:bg-gray-50 text-gray-800 p-3 rounded-full shadow-lg transition-all duration-200 hover:shadow-xl border border-gray-200",title:"Back to Dashboard",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e.jsxs("div",{className:"absolute top-4 left-20 z-40 bg-white rounded-lg shadow-lg p-4 min-w-64",children:[e.jsx("label",{htmlFor:"barangay_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Barangay"}),d(x,u),c&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded border border-blue-200",children:e.jsx("div",{className:"text-xs text-blue-800",children:m?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),"Loading sites..."]}):`${t.length} site${t.length!==1?"s":""}`})}),s&&e.jsx("div",{className:"p-2 bg-green-50 rounded border border-green-200",children:e.jsxs("div",{className:"text-xs text-green-800 space-y-1",children:[e.jsx("div",{className:"font-semibold",children:"Route Information:"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",s.formattedDuration]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distance:"})," ",s.distance," km"]}),a&&e.jsxs("div",{children:[e.jsx("strong",{children:"Nearest Site:"})," ",(l=a.purok)==null?void 0:l.purok_name]})]})})]})]}),e.jsx("div",{ref:n,className:"w-full h-full absolute inset-0"})]})]})};export{R as default};
