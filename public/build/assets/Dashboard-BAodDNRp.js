import{J as w,R as d,r as A,x as D,j as e,S as k}from"./app-B7J0SWTz.js";import C from"./DriverFilter-CFibPStd.js";import _ from"./DriverList-Dt96s4j6.js";import F from"./StatCard-CSMjdMqY.js";import{P as M}from"./Pagination-5z7owuhT.js";import{F as E}from"./FormModal-CvklivpE.js";import $ from"./ScheduleTable-BXkDY9S4.js";import{s as q}from"./SweetAlert-BzZh6seW.js";import"./index-_Odw1IWy.js";import"./iconBase-DXSjkioo.js";import"./DriverCard-CB1LdAP1.js";import"./ClientPagination-BCfIsZ3n.js";import"./TextInput-wWY6XlGJ.js";import"./PrimaryButton-DFPbi5hc.js";import"./index-MeosAZMR.js";const X=()=>{const{drivers:s,schedules:c,users:i,stats:o,barangays:t}=w().props,[m,x]=d.useState("all"),[b,n]=d.useState(!1),[v,L]=d.useState(""),[l,u]=A.useState("drivers"),{data:g,setData:h,post:y,processing:p,errors:j,reset:f}=D({user_id:"",license_number:"",status:"active",current_latitude:null,current_longitude:null}),N=[{name:"user_id",label:"Applicant",type:"select",required:!0,options:i&&i.length>0?i.map(r=>({value:r.id,label:`${r.name||""} ${r.lastname||""} - ${r.email||""}`})):[]},{name:"license_number",label:"License Number",type:"text",required:!0,placeholder:"Enter license number"},{name:"barangay_id",label:"Assigned Barangay",type:"select",required:!0,options:t&&t.length>0?t.map(r=>({value:r.id,label:r.baranggay_name})):[{value:"",label:"No barangays available"}],placeholder:"Select a barangay"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"pending",label:"Pending"},{value:"onduty",label:"On Duty"},{value:"resigned",label:"Resigned"}]}],S=r=>{y("/admin/Driver/add",{data:r,preserveScroll:!0,onSuccess:a=>{console.log("Success response:",a),q("success","Added Successfully"),n(!1),f(),k.reload()},onError:a=>{console.log("Errors:",a)}})};return e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:o&&Array.isArray(o)&&o.map((r,a)=>e.jsx(F,{title:r.title,value:r.value,description:r.description},a))}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>u("drivers"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="drivers"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Drivers Management"}),e.jsx("button",{onClick:()=>u("schedules"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${l==="schedules"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Collection Schedules"})]})})}),l==="drivers"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Active Drivers"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Manage driver schedules and assignments"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-gray-900 rounded-md hover:bg-gray-800 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Driver"]}),e.jsx(C,{activeFilter:m,setActiveFilter:x})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(_,{drivers:s,schedules:c,activeFilter:m,searchQuery:v})}),s&&s.links&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx(M,{links:s.links})})]}),l==="schedules"&&e.jsx($,{drivers:s.data||s,barangays:t,schedules:c}),e.jsx(E,{show:b,onClose:()=>n(!1),title:"Add New Driver",fields:N,onSubmit:S,submitText:p?"Adding...":"Add Driver",processing:p,errors:j,formData:g,onFormChange:h})]})})};export{X as default};
