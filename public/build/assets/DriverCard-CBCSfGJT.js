import{r as o,j as e,S as A,a as V}from"./app-Dq1yuLGv.js";import{F as G}from"./FormModal-BlIbNKQq.js";import{C as he}from"./ClientPagination-volDfAm4.js";import{c as te,s as h}from"./SweetAlert-ClS17aiO.js";import{g as se}from"./imageHelpers-BzNwYwgf.js";import"./TextInput-CCRpC4Zc.js";import"./PrimaryButton-DxEWhBEi.js";import"./index-BeFBEjk5.js";import"./iconBase-D2mkTBiS.js";var ge={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function ae(t){if(typeof t=="number")return{value:t,unit:"px"};var a,l=(t.match(/^[0-9.]*/)||"").toString();l.includes(".")?a=parseFloat(l):a=parseInt(l,10);var n=(t.match(/[^0-9]*$/)||"").toString();return ge[n]?{value:a,unit:n}:(console.warn("React Spinners: ".concat(t," is not a valid css value. Defaulting to ").concat(a,"px.")),{value:a,unit:"px"})}function ee(t){var a=ae(t);return"".concat(a.value).concat(a.unit)}var re=function(t,a,l){var n="react-spinners-".concat(t,"-").concat(l);if(typeof window>"u"||!window.document)return n;var c=document.createElement("style");document.head.appendChild(c);var x=c.sheet,M=`
    @keyframes `.concat(n,` {
      `).concat(a,`
    }
  `);return x&&x.insertRule(M,0),n},W=function(){return W=Object.assign||function(t){for(var a,l=1,n=arguments.length;l<n;l++){a=arguments[l];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(t[c]=a[c])}return t},W.apply(this,arguments)},xe=function(t,a){var l={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(l[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,n=Object.getOwnPropertySymbols(t);c<n.length;c++)a.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(t,n[c])&&(l[n[c]]=t[n[c]]);return l},pe=re("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(180deg) rotateY(360deg) rotateZ(360deg)}","right"),fe=re("RingLoader","0% {transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg)} 100% {transform: rotateX(360deg) rotateY(180deg) rotateZ(360deg)}","left");function ye(t){var a=t.loading,l=a===void 0?!0:a,n=t.color,c=n===void 0?"#000000":n,x=t.speedMultiplier,M=x===void 0?1:x,N=t.cssOverride,T=N===void 0?{}:N,O=t.size,S=O===void 0?60:O,I=xe(t,["loading","color","speedMultiplier","cssOverride","size"]),D=ae(S),y=D.value,v=D.unit,$=W({display:"inherit",width:ee(S),height:ee(S),position:"relative"},T),j=function(P){return{position:"absolute",top:"0",left:"0",width:"".concat(y).concat(v),height:"".concat(y).concat(v),border:"".concat(y/10).concat(v," solid ").concat(c),opacity:"0.4",borderRadius:"100%",animationFillMode:"forwards",perspective:"800px",animation:"".concat(P===1?pe:fe," ").concat(2/M,"s 0s infinite linear")}};return l?o.createElement("span",W({style:$},I),o.createElement("span",{style:j(1)}),o.createElement("span",{style:j(2)})):null}const be=({driver:t,schedules:a,show:l,onClose:n,isLoadingSchedules:c=!1})=>{var J,K,Q;if(!l||!t)return null;o.useEffect(()=>{var s;l&&a&&(console.log("Schedules data:",a),console.log("First schedule barangay:",(s=a[0])==null?void 0:s.barangay))},[l,a]);const[x,M]=o.useState(1),[N,T]=o.useState(!0),[O,S]=o.useState(!1),[I,D]=o.useState(!1),[y,v]=o.useState(null),[$,j]=o.useState({}),[P,F]=o.useState({}),[B,U]=o.useState(!1),[Y,R]=o.useState(!1),k=5;o.useEffect(()=>{if(l){T(!0);const s=setTimeout(()=>{T(!1)},500);return()=>clearTimeout(s)}},[l,a]);const{sortedAndGroupedSchedules:_,monthlySchedules:H}=o.useMemo(()=>{const r=[...a.filter(m=>m.driver_id===t.id)].sort((m,p)=>{const i=new Date(m.collection_date),E=new Date(p.collection_date);if(i.getTime()!==E.getTime())return i.getTime()-E.getTime();const ue=m.collection_time||"00:00",me=p.collection_time||"00:00";return ue.localeCompare(me)}),g=r.reduce((m,p)=>{const E=new Date(p.collection_date).toLocaleDateString("en-US",{year:"numeric",month:"long"});return m[E]||(m[E]=[]),m[E].push(p),m},{}),f=Object.entries(g).map(([m,p])=>({monthYear:m,schedules:p}));return f.sort((m,p)=>{const i=new Date(m.monthYear),E=new Date(p.monthYear);return i.getTime()-E.getTime()}),{sortedAndGroupedSchedules:r,monthlySchedules:f}},[a,t.id]),X=Math.ceil(_.length/k),w=(x-1)*k;_.slice(w,w+k);const z=o.useMemo(()=>{const s=[];return H.forEach(({monthYear:r,schedules:g})=>{s.push({type:"month-header",monthYear:r}),g.forEach(f=>{s.push({type:"schedule",schedule:f})})}),s},[H]),Z=o.useMemo(()=>z.slice(w,w+k),[z,w,k]),u=[{name:"collection_date",label:"Collection Date",type:"date",required:!0},{name:"collection_time",label:"Collection Time",type:"time",required:!0},{name:"notes",label:"Notes",type:"textarea",required:!1,rows:3}],d=[{name:"status",label:"Driver Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"pending",label:"Pending"},{value:"onduty",label:"On Duty"},{value:"resigned",label:"Resigned"}]},{name:"license_number",label:"License Number",type:"text",required:!0,placeholder:"Enter license number"}],C=(s,r)=>{const g=s?s.charAt(0).toUpperCase():"",f=r?r.charAt(0).toUpperCase():"";return`${g}${f}`},L=s=>{if(!s)return"N/A";try{const r=new Date(s);return isNaN(r.getTime())?"Invalid Date":r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(r){return console.error("Error formatting date:",r),"Invalid Date"}},q=s=>{if(!s)return"N/A";try{const[r,g]=s.split(":").map(Number),f=r>=12?"PM":"AM";return`${r%12||12}:${g.toString().padStart(2,"0")}${f}`}catch(r){return console.error("Error formatting time:",r),s}},b=s=>{var r;return s?(r=s.barangay)!=null&&r.baranggay_name?s.barangay.baranggay_name:s.baranggay_name?s.baranggay_name:(console.log("Could not find barangay name for schedule:",s),"N/A"):"N/A"},ne=s=>{M(s)},oe=s=>{v(s);const r={collection_date:s.collection_date?new Date(s.collection_date).toISOString().split("T")[0]:"",collection_time:s.collection_time||"",notes:s.notes||""};j(r),S(!0)},le=async s=>{U(!0);try{await A.patch(`/admin/driver/schedule/${y.id}`,s,{preserveScroll:!0,onSuccess:()=>{h("success","Schedule updated successfully"),S(!1),v(null),j({}),A.reload()},onError:r=>{console.log("Edit errors:",r),h("error","Failed to update schedule")},onFinish:()=>{U(!1)}})}catch(r){console.error("Edit submission error:",r),U(!1)}},ie=()=>{const s={status:t.status||"",license_number:t.license_number||""};F(s),D(!0)},ce=async s=>{R(!0);try{await A.patch(`/admin/drivers/${t.id}`,s,{preserveScroll:!0,onSuccess:()=>{h("success","Driver updated successfully"),D(!1),F({}),A.reload()},onError:r=>{console.log("Driver edit errors:",r),h("error","Failed to update driver")},onFinish:()=>{R(!1)}})}catch(r){console.error("Driver edit submission error:",r),R(!1)}},de=async s=>{var g;await te("Delete Schedule",`Are you sure you want to delete this schedule for ${((g=s.barangay)==null?void 0:g.baranggay_name)||s.baranggay_name||"this barangay"}?`,"Delete")&&A.delete(`/admin/driver/schedule/${s.id}`,{preserveScroll:!0,onSuccess:()=>{h("success","Schedule deleted successfully"),A.reload()},onError:()=>{h("error","Failed to delete schedule")}})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Driver Details"}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:t.user.picture?e.jsx("img",{src:se(t.user),alt:`${t.user.name} ${t.user.lastname}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-20 h-20 text-gray-400 flex items-center justify-center text-2xl font-bold",children:C(t.user.name,t.user.lastname)})})}),e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(J=t.user)==null?void 0:J.name," ",(K=t.user)==null?void 0:K.lastname,e.jsxs("div",{className:"relative group flex-shrink-0",children:[e.jsx("span",{className:`w-2 h-2 rounded-full block
                          ${t.status==="onduty"?"bg-green-500":t.status==="inactive"?"bg-red-500":t.status==="pending"?"bg-yellow-500":t.status==="active"?"bg-blue-500":"bg-gray-500"}`}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:[t.status.charAt(0).toUpperCase()+t.status.slice(1),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),e.jsx("p",{className:"text-gray-600",children:(Q=t.user)==null?void 0:Q.email})]}),e.jsxs("button",{onClick:ie,className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",title:"Edit Driver",children:[e.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Driver"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"License Number"}),e.jsx("p",{className:"font-medium",children:t.license_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),e.jsx("p",{className:"font-medium",children:t.user.phone_num||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Employment Date"}),e.jsx("p",{className:"font-medium",children:L(t.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:t.status})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Scheduled Collection"}),!N&&_.length>0&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Showing ",w+1,"-",Math.min(w+k,_.length)," of ",_.length," schedules"]})]}),N||c?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(ye,{color:"#00de08",size:50,loading:!0}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading schedules..."})]}):_.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barangay"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Time"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.map((s,r)=>{var g,f,m,p;if(s.type==="month-header")return e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:"7",className:"px-6 py-3",children:e.jsx("h5",{className:"font-semibold text-gray-900 text-sm",children:s.monthYear})})},`month-${s.monthYear}`);{const i=s.schedule;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L(i.collection_date)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b(i)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(i.collection_time)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i.finished_time?q(i.finished_time):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium 
                                    ${i.status==="completed"?"bg-green-100 text-green-800":i.status==="failed"?"bg-red-100 text-red-800":i.status==="progress"?"bg-yellow-100 text-yellow-800":i.status==="active"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:((f=(g=i.status)==null?void 0:g.charAt(0))==null?void 0:f.toUpperCase())+((p=(m=i.status)==null?void 0:m.slice(1))==null?void 0:p.replace("_"," "))||"N/A"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:i.notes||"None"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>oe(i),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Edit Schedule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{onClick:()=>de(i),className:"text-red-600 hover:text-red-900 transition-colors",title:"Remove Schedule",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},i.id)}})})]})}),e.jsx(he,{currentPage:x,totalPages:X,onPageChange:ne})]}):e.jsx("p",{className:"text-gray-500",children:"No barangay schedules found for this driver."})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t",children:e.jsx("button",{type:"button",onClick:n,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors",children:"Close"})})]})}),e.jsx(G,{show:O,onClose:()=>{S(!1),v(null),j({})},title:"Edit Schedule",initialData:y,onSubmit:le,fields:u,submitText:B?"Updating...":"Update Schedule",processing:B,formData:$,onFormChange:j}),e.jsx(G,{show:I,onClose:()=>{D(!1),F({})},title:"Edit Driver",initialData:t,onSubmit:ce,fields:d,submitText:Y?"Updating...":"Update Driver",processing:Y,formData:P,onFormChange:F})]})},Ee=({driver:t,schedule:a,isActive:l})=>{const[n,c]=o.useState(!1),x=o.useRef(null),[M,N]=o.useState(!1),[T,O]=o.useState([]),[S,I]=o.useState(!1),[D,y]=o.useState(!1),[v,$]=o.useState({}),[j,P]=o.useState(!1);o.useEffect(()=>{(async()=>{I(!0);try{const d=await V.get("/admin/getBarangay/1");O(d.data.barangay_data||[])}catch(d){console.error("Error fetching barangays: ",d)}finally{I(!1)}})()},[]);const F=new Date,B=F.toISOString().split("T")[0],U=F.toTimeString().slice(0,5),Y=[{name:"driver_id",type:"hidden",value:t.id,disabled:!0},{name:"barangay_id",label:"Barangay",type:"select",required:!0,options:T.map(u=>({value:u.id,label:u.baranggay_name})),placeholder:"Select a barangay"},{name:"collection_date",label:"Date",type:"date",value:B,min:B,required:!0},{name:"collection_time",label:"Time",type:"time",value:U,required:!0},{name:"status",label:"Status",type:"select",required:!0,value:"active",options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]},{name:"notes",label:"Additional note",type:"text",required:!1}],R=async u=>{P(!0);try{await V.post("/admin/driver/assign",u),h("success","Driver assigned"),A.reload({only:["drivers","schedules"]}),y(!1)}catch(d){if(console.error("Failed to assign barangay:",d),d.response)if(d.response.data.errors){const C=Object.values(d.response.data.errors)[0][0];h("error",C)}else d.response.data.message?h("error",d.response.data.message):h("error","Something went wrong");else h("error",d.message||"Network error")}finally{P(!1)}},k=async u=>{var C,L,q;if(await te("Are you sure?","This action will permanently remove the driver. This cannot be undone."))try{const b=await V.delete(`/delete/driver/${u}`);b.data.success?(h("success",b.data.message),A.reload({only:["drivers","stats","users"]})):h("error",b.data.message)}catch(b){((C=b.response)==null?void 0:C.status)===422?h("error",b.response.data.message):(q=(L=b.response)==null?void 0:L.data)!=null&&q.message?h("error",b.response.data.message):h("error","Failed to remove driver")}};o.useEffect(()=>{function u(d){x.current&&!x.current.contains(d.target)&&c(!1)}return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const _=()=>{if(!l)return"bg-gray-400";switch(t.status){case"on duty":case"onduty":return"bg-green-500";case"active":return"bg-blue-500";case"inactive":return"bg-red-500";case"pending":return"bg-yellow-500";case"resigned":return"bg-gray-500";default:return"bg-gray-500"}},X=(()=>{if(!l)return"Off Duty";switch(t.status){case"on duty":case"onduty":return"On Duty";case"active":return"Active";case"inactive":return"Inactive";case"pending":return"Pending";case"resigned":return"Resigned";default:return t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Unknown"}})(),w=_(),z=(u,d)=>{const C=u?u.charAt(0).toUpperCase():"",L=d?d.charAt(0).toUpperCase():"";return`${C}${L}`},Z=a&&a.some(u=>u.driver_id===t.id);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.user.picture?e.jsx("img",{src:se(t.user),alt:t.user.name,className:"w-12 h-12 rounded-full object-cover flex-shrink-0"}):e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:z(t.user.name,t.user.lastname)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:[t.user.name," ",t.user.lastname]}),e.jsx("span",{className:`w-2 h-2 rounded-full flex-shrink-0 ${w}`,title:X})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:t.user.email})]})]}),e.jsxs("div",{className:"relative flex-shrink-0",ref:x,children:[e.jsx("button",{onClick:()=>c(!n),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),n&&e.jsxs("div",{className:"absolute right-0 mt-1 w-40 bg-white border border-gray-200 rounded-md shadow-lg z-50 overflow-hidden",children:[e.jsx("button",{onClick:()=>N(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"View Details"}),e.jsx("button",{onClick:()=>k(t.id),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:"Remove"})]})]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>y(!0),className:"w-full px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-gray-900 rounded-md hover:bg-gray-800 transition-colors",children:Z?"Set another schedule":"Create Schedule"})})]}),e.jsx(G,{show:D,onClose:()=>y(!1),title:`Assign Schedule to ${t.user.name}`,fields:Y,initialData:{driver_id:t.id},formData:v,onFormChange:$,onSubmit:R,submitText:"Assign",processing:j}),e.jsx(be,{driver:t,schedules:a,show:M,onClose:()=>N(!1)})]})};export{Ee as default};
