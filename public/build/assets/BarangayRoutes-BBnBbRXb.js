import{r as j,j as e,Q as f,t as v}from"./app-BlfiHCkk.js";import N from"./useBarangayMap-CD9_mj9u.js";import"./mapbox-gl-B1cq-MXh.js";/* empty css                  */import"./react-select.esm-DnOPPpkA.js";import"./index-CnyDuYXe.js";import"./index-vo44Juk7.js";import"./can-3MqaZyCZ.js";const R=({mapboxToken:i})=>{var l;const{mapContainer:n,loading:o,error:t,renderBarangaySelect:d,renderSitesInfo:w,selectedBarangay:m,activeSites:r,loadingSites:c,routeInfo:s,nearestSite:a}=N(i),[x,h]=j.useState({barangay_id:""}),u=(b,g)=>{h(p=>({...p,[b]:g}))};return t?e.jsx("div",{className:"w-full h-screen flex items-center justify-center bg-gray-100 p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Map Error"}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:t}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm transition-colors duration-200",children:"Reload Page"})]})}):e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"San Francisco Map"}),e.jsxs("div",{className:"w-full h-screen relative bg-gray-100",children:[o&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading map..."})]})}),e.jsxs(v,{href:"/",className:"absolute top-4 left-4 z-50 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white p-2.5 sm:p-3 rounded-lg shadow-lg transition-all duration-200 hover:shadow-xl flex items-center gap-2 group",title:"Back to Dashboard",children:[e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{className:"hidden sm:inline-block text-sm font-medium",children:"Back"})]}),e.jsxs("div",{className:"absolute top-16 sm:top-4 left-4 right-4 md:left-auto md:right-4 z-40 bg-white rounded-lg shadow-lg p-3 md:p-4 md:min-w-64 max-w-md md:max-w-sm",children:[e.jsx("label",{htmlFor:"barangay_id",className:"block text-xs md:text-sm font-medium text-gray-700 mb-2",children:"Select Barangay"}),d(x,u),m&&e.jsxs("div",{className:"mt-2 md:mt-3 space-y-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded border border-blue-200",children:e.jsx("div",{className:"text-xs text-blue-800",children:c?e.jsxs("span",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-2"}),"Loading sites..."]}):`${r.length} site${r.length!==1?"s":""}`})}),s&&e.jsx("div",{className:"p-2 bg-green-50 rounded border border-green-200",children:e.jsxs("div",{className:"text-xs text-green-800 space-y-1",children:[e.jsx("div",{className:"font-semibold",children:"Route Information:"}),e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",s.formattedDuration]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Distance:"})," ",s.distance," km"]}),a&&e.jsxs("div",{children:[e.jsx("strong",{children:"Nearest Site:"})," ",(l=a.purok)==null?void 0:l.purok_name]})]})})]})]}),e.jsx("div",{ref:n,className:"w-full h-full absolute inset-0"})]})]})};export{R as default};
