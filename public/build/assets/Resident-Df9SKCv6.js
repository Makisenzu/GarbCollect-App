import{j as e}from"./app-kp99I6hj.js";import{useResidentMap as p}from"./useResident-DgbaF3Xe.js";import{T as f}from"./truck-D0a6T5Ze.js";import{M as j}from"./map-pin-CrbWaPQW.js";import{C as N}from"./circle-alert-AP-9eDE4.js";import{C as v}from"./clock-CJfawW9L.js";import{c as m}from"./createLucideIcon-BBCL8S4W.js";import{T as y}from"./trending-up-DUAWRcNr.js";import{C as w}from"./circle-check-big-CKKhYito.js";import"./mapbox-gl-B45-CkQK.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],S=m("activity",C);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],L=m("refresh-cw",k),E=({mapboxKey:x,barangayId:d})=>{const{mapContainer:g,currentSchedule:r,driverLocation:i,siteLocations:s,loading:h,isOnline:n,mapInitialized:b}=p({mapboxKey:x,barangayId:d}),u=l=>{if(!l)return{text:"No schedule",color:"text-gray-600",bg:"bg-gray-100"};const c={in_progress:{text:"Collection in Progress",color:"text-blue-600",bg:"bg-blue-50",border:"border-blue-200"},completed:{text:"Collection Completed",color:"text-green-600",bg:"bg-green-50",border:"border-green-200"},scheduled:{text:"Scheduled",color:"text-amber-600",bg:"bg-amber-50",border:"border-amber-200"},default:{text:"Pending",color:"text-gray-600",bg:"bg-gray-50",border:"border-gray-200"}};return c[l.status]||c.default},t=()=>s.filter(l=>l.status==="completed").length,o=()=>s.length===0?0:Math.round(t()/s.length*100);if(h)return e.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl flex items-center justify-center border border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Loading collection map"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Preparing tracking data..."})]})});const a=u(r);return e.jsxs("div",{className:"w-full h-full bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(f,{className:"h-5 w-5 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Live Collection Tracker"})]}),e.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Barangay ",d]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[!n&&e.jsxs("div",{className:"flex items-center gap-2 bg-amber-100 text-amber-700 px-4 py-2 rounded-lg border border-amber-200",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Offline Mode"})]}),r&&e.jsx("div",{className:`px-4 py-2 rounded-lg text-sm font-semibold border ${a.bg} ${a.color} ${a.border}`,children:a.text})]})]}),r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(v,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Scheduled Date"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.scheduled_date?new Date(r.scheduled_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Not scheduled"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(S,{className:`w-5 h-5 ${i?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Driver Status"}),e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i?"En Route":"Not Tracking"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl p-4 border border-gray-200 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(y,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium",children:"Progress"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[t()," / ",s.length," Sites"]})]})]})})]})]}),e.jsxs("div",{className:"relative w-full h-96 md:h-[500px]",children:[!b&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center z-10",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Initializing map"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Please wait..."})]})}),e.jsx("div",{ref:g,className:"w-full h-full absolute inset-0"}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-xl shadow-2xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 px-4 py-2 border-b border-gray-200",children:e.jsx("p",{className:"text-sm font-bold text-gray-900",children:"Map Legend"})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded-full shadow-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Driver Location"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full border-2 border-white shadow-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Collection Site"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full border-2 border-white shadow-sm"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Completed Site"})]})]})]}),n&&e.jsx("button",{className:"absolute top-4 right-4 bg-white hover:bg-gray-50 p-3 rounded-xl shadow-lg border border-gray-200 transition-all hover:shadow-xl",children:e.jsx(L,{className:"w-5 h-5 text-gray-700"})})]}),s.length>0&&e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gradient-to-br from-gray-50 to-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Collection Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:[o(),"%"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 h-3 rounded-full transition-all duration-500 shadow-inner",style:{width:`${o()}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-600",children:[e.jsxs("span",{children:[t()," sites completed"]}),e.jsxs("span",{children:[s.length-t()," remaining"]})]})]})]})};export{E as default};
