import{J as w,R as d,r as A,x as D,j as e,S as k}from"./app-BKte-XQA.js";import C from"./DriverFilter-CQ5aCOR1.js";import F from"./DriverList-Dnf6jxZ6.js";import M from"./StatCard-Bp-kOopE.js";import{P as _}from"./Pagination-Bt4Yg-bi.js";import{F as E}from"./FormModal-CPNgq2yx.js";import $ from"./ScheduleTable-CLrVrZmF.js";import{s as L}from"./SweetAlert-B0yaMptT.js";import"./index-BtEIqtrI.js";import"./iconBase-DxYAxspi.js";import"./DriverCard-BVPDI3pv.js";import"./ClientPagination-r2-8IwXM.js";import"./imageHelpers-BzNwYwgf.js";import"./TextInput-kJD4KrRC.js";import"./PrimaryButton-BtqC3swm.js";import"./index-VN7jjdvd.js";const Y=()=>{const{drivers:s,schedules:n,users:i,stats:l,barangays:x}=w().props,[c,p]=d.useState("all"),[v,o]=d.useState(!1),[b,R]=d.useState(""),[a,m]=A.useState("drivers"),{data:h,setData:g,post:y,processing:u,errors:j,reset:f}=D({user_id:"",license_number:"",status:"active",current_latitude:null,current_longitude:null}),N=[{name:"user_id",label:"Applicant",type:"select",required:!0,options:i&&i.length>0?i.map(r=>({value:r.id,label:`${r.name||""} ${r.lastname||""} - ${r.email||""}`})):[]},{name:"license_number",label:"License Number",type:"text",required:!0,placeholder:"Enter license number"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"pending",label:"Pending"},{value:"onduty",label:"On Duty"},{value:"resigned",label:"Resigned"}]}],S=r=>{y("/admin/Driver/add",{data:r,preserveScroll:!0,onSuccess:t=>{console.log("Success response:",t),L("success","Added Successfully"),o(!1),f(),k.reload()},onError:t=>{console.log("Errors:",t)}})};return e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:l&&Array.isArray(l)&&l.map((r,t)=>e.jsx(M,{title:r.title,value:r.value,description:r.description},t))}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>m("drivers"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="drivers"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Drivers Management"}),e.jsx("button",{onClick:()=>m("schedules"),className:`whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="schedules"?"border-gray-900 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Collection Schedules"})]})})}),a==="drivers"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Active Drivers"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"Manage driver schedules and assignments"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-900 border border-gray-900 rounded-md hover:bg-gray-800 transition-colors",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Driver"]}),e.jsx(C,{activeFilter:c,setActiveFilter:p})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx(F,{drivers:s,schedules:n,activeFilter:c,searchQuery:b})}),s&&s.links&&e.jsx("div",{className:"px-6 pb-6",children:e.jsx(_,{links:s.links})})]}),a==="schedules"&&e.jsx($,{drivers:s.data||s,barangays:x,schedules:n}),e.jsx(E,{show:v,onClose:()=>o(!1),title:"Add New Driver",fields:N,onSubmit:S,submitText:u?"Adding...":"Add Driver",processing:u,errors:j,formData:h,onFormChange:g})]})})};export{Y as default};
