import{r as p,j as s}from"./app-B7J0SWTz.js";import{T as f}from"./TextInput-wWY6XlGJ.js";import{P as q}from"./PrimaryButton-DFPbi5hc.js";import{a as k}from"./index-MeosAZMR.js";const C=({show:n=!1,onClose:m=()=>{},title:y="Form",initialData:o=null,onSubmit:v=()=>{},fields:c=[],submitText:N="Submit",processing:d=!1,formData:l={},onFormChange:i=()=>{}})=>{const[u,x]=p.useState({}),[g,j]=p.useState(!1);p.useEffect(()=>{if(n&&!g){const e={};c.forEach(r=>{var a,t;e[r.name]=(o==null?void 0:o[r.name])??r.defaultValue??(r.type==="select"&&r.required?(t=(a=r.options)==null?void 0:a[0])==null?void 0:t.value:"")}),i(e),x({}),j(!0)}n||j(!1)},[n,g,o,c,i]);const b=e=>{const{name:r,value:a}=e.target;i({...l,[r]:a}),u[r]&&x(t=>({...t,[r]:null}))},w=async e=>{var r,a;e.preventDefault();try{await v(l),m()}catch(t){(a=(r=t.response)==null?void 0:r.data)!=null&&a.errors?x(t.response.data.errors):console.error("Form submission error:",t)}};return n?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-y-auto",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:m}),s.jsx("div",{className:"relative z-50 w-full max-w-md p-4 mx-auto",children:s.jsx("div",{className:"relative bg-white rounded-lg shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:y}),s.jsxs("form",{onSubmit:w,children:[s.jsx("div",{className:"space-y-4",children:c.map(e=>{var t;const r=l[e.name]??"",a=!!u[e.name];return s.jsxs("div",{children:[s.jsxs("label",{htmlFor:e.name,className:"block text-sm font-medium text-gray-700 mb-1",children:[e.label," ",e.required&&s.jsx("span",{className:"text-red-500",children:"*"})]}),e.type==="select"?s.jsxs("select",{id:e.name,name:e.name,value:r,onChange:b,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a?"border-red-500":"border"}`,required:e.required,disabled:e.disabled,children:[!e.required&&!e.hideDefaultOption&&s.jsxs("option",{value:"",children:["Select ",e.label]}),(t=e.options)==null?void 0:t.map(h=>s.jsx("option",{value:h.value,children:h.label},h.value))]}):e.type==="textarea"?s.jsx("textarea",{id:e.name,name:e.name,value:r,onChange:b,className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${a?"border-red-500":"border"}`,rows:e.rows||3,required:e.required,disabled:e.disabled}):s.jsx(f,{id:e.name,name:e.name,type:e.type||"text",value:r,onChange:b,className:`w-full ${a?"border-red-500":""}`,required:e.required,disabled:e.disabled,placeholder:e.placeholder}),a&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:u[e.name]})]},e.name)})}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:m,className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",disabled:d,children:"Cancel"}),s.jsxs(q,{type:"submit",disabled:d,children:[s.jsx(k,{size:20,className:"mr-2"}),d?"Processing...":N]})]})]})]})})})]}):null};export{C as F};
